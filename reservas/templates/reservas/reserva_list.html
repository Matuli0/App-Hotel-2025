{% extends "base.html" %}

{% block content %}
  <div class="container mt-4">
    <h2>Listado de Reservas</h2>
    
    <!-- Verificar si hay reservas -->
    {% if reservas %}
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>ID Reserva</th>
            <th>Habitación</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
            <th>Costo Total</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for reserva in reservas %}
            <tr>
              <td>{{ reserva.id_reserva }}</td>
              <td>{{ reserva.id_habitacion.numero }}</td>  <!-- Relación con la habitación -->
              <td>{{ reserva.fecha_inicio }}</td>
              <td>{{ reserva.fecha_fin }}</td>
              <td>{{ reserva.costo_total }}</td>
              <td>
                <span class="badge 
                  {% if reserva.estado == 'pendiente' %}badge-warning
                  {% elif reserva.estado == 'confirmada' %}badge-success
                  {% elif reserva.estado == 'cancelada' %}badge-danger
                  {% else %}badge-secondary
                  {% endif %}
                ">{{ reserva.estado }}</span>
              </td>
              <td>
                <a href="{% url 'reserva-edit' reserva.id_reserva %}" class="btn btn-info btn-sm">Editar</a>
                <a href="{% url 'reserva-delete' reserva.id_reserva %}" class="btn btn-danger btn-sm" onclick="return confirm('¿Estás seguro de que deseas eliminar esta reserva?');">Eliminar</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert alert-warning" role="alert">
        No hay reservas registradas.
      </div>
    {% endif %}
  </div>
{% endblock %}
